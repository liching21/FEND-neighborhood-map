<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <title>Neighborhood Map</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="js/knockout-3.3.0.js"></script>
  <script src="js/jquery.min.js"></script>
</head>
<body>
    <!--TODO: Testing Implement a search-->
    <p>Search Term: <input data-bind="textInput: query" /></p>
    <h2>Hello, <span data-bind="text: result"> </span>!</h2>

    <!--
    <button data-bind="click: myFunction">
        Click me
    </button>-->


    <ul data-bind="foreach: resultsArray, click: myFunction">
        <li data-bind="text: name, attr: {id: $index }" ></li>
    </ul>


    <script>
        // Here's my data model
        var ViewModel = function() {

            var initArray = [{name: 'Alice'},{name:'Bob'},{name: 'Cathy'}]; //,'Donald','Ella','Frank','Gloria'];

            this.resultsArray = ko.observableArray();
            this.query = ko.observable("");
            this.result = ko.pureComputed(function() {
                // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.
                var a = this.query().toLowerCase();

                this.resultsArray([]);
                for (var i in initArray){
                    if(initArray[i].name.toLowerCase().indexOf(a) >= 0) {
                    //console.log("this.query().toLowerCase() = " +  a);
                    //console.log("initArray[i].toLowerCase().indexOf(a =" + initArray[i].toLowerCase().indexOf(a) + ")");
                    this.resultsArray.push(initArray[i]);
                  }
                }

                console.log(this.resultsArray());
                return this.query() + " yay!";
            }, this);

            console.log("are we here?");

            //clicked function
            this.myFunction = function(data, event) {
                if (event.shiftKey) {
                    //do something different when user has shift key down
                    console.log("1 holding shift key!");
                } else {
                    //do normal action
                    console.log("1 something happened?" + data);
                }
            };

            //var myFunction = function () {return console.log("myFunction is working!");};

            /**
            var myFunction = function(data, event) {
                if (event.shiftKey) {
                    //do something different when user has shift key down
                    console.log("holding shift key!");
                } else {
                    //do normal action
                    console.log("something happened?" + data);
                }
            };*/
        };

        ko.applyBindings(new ViewModel()); // This makes Knockout get to work

    </script>
</body>
<html>